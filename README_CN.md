<p align="center">
  <picture>
    <source media="(prefers-color-scheme: dark)" srcset="https://readme-typing-svg.demolab.com?font=Fira+Code&weight=700&size=28&duration=3000&pause=1000&color=A78BFA&center=true&vCenter=true&width=500&lines=%F0%9F%8E%B5+UVR+Headless+Runner;%E9%9F%B3%E9%A2%91%E5%88%86%E7%A6%BB%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7">
    <img alt="UVR Headless Runner" src="https://readme-typing-svg.demolab.com?font=Fira+Code&weight=700&size=28&duration=3000&pause=1000&color=7C3AED&center=true&vCenter=true&width=500&lines=%F0%9F%8E%B5+UVR+Headless+Runner;%E9%9F%B3%E9%A2%91%E5%88%86%E7%A6%BB%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%B7%A5%E5%85%B7">
  </picture>
</p>

<h3 align="center">ğŸ§ ä»ä»»æ„éŸ³é¢‘ä¸­åˆ†ç¦»äººå£°ã€ä¹å™¨ã€é¼“ã€è´æ–¯ç­‰</h3>

<p align="center">
  <strong>åŸºäº UVR çš„å‘½ä»¤è¡ŒéŸ³é¢‘åˆ†ç¦»å·¥å…·</strong>
</p>

<p align="center">
  <a href="https://github.com/chyinan/uvr-headless-runner/blob/master/LICENSE">
    <img src="https://img.shields.io/badge/è®¸å¯è¯-MIT-blue.svg" alt="License: MIT">
  </a>
  <a href="https://www.python.org/downloads/">
    <img src="https://img.shields.io/badge/python-3.9+-green.svg" alt="Python 3.9+">
  </a>
  <a href="https://pytorch.org/">
    <img src="https://img.shields.io/badge/PyTorch-2.0+-ee4c2c.svg" alt="PyTorch">
  </a>
  <a href="https://github.com/chyinan/uvr-headless-runner">
    <img src="https://img.shields.io/badge/å¹³å°-Windows%20|%20Linux%20|%20macOS-lightgrey.svg" alt="Platform">
  </a>
  <a href="https://pypi.org/project/uvr-headless-runner/">
    <img src="https://img.shields.io/pypi/v/uvr-headless-runner.svg?color=blue" alt="PyPI">
  </a>
</p>

<p align="center">
  <strong>ğŸ‡¨ğŸ‡³ ä¸­æ–‡</strong> | <a href="README.md">ğŸ‡¬ğŸ‡§ English</a> | <a href="DOCKER_README_CN.md">ğŸ³ Docker</a>
</p>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

<table>
<tr>
<td width="33%">

### ğŸ¸ MDX-Net è¿è¡Œå™¨
- MDX-Net / MDX-C æ¨¡å‹
- **Roformer** (MelBandRoformer, BSRoformer)
- **SCNet** (ç¨€ç–å‹ç¼©ç½‘ç»œ)
- æ”¯æŒ ONNX & PyTorch æ ¼å¼

</td>
<td width="33%">

### ğŸ¥ Demucs è¿è¡Œå™¨
- Demucs v1 / v2 / v3 / v4
- **htdemucs** / **htdemucs_ft**
- **6è½¨åˆ†ç¦»** (å‰ä»–ã€é’¢ç´)
- æ¨¡å‹è‡ªåŠ¨ä¸‹è½½

</td>
<td width="33%">

### ğŸ¤ VR è¿è¡Œå™¨
- VR Architecture æ¨¡å‹
- **VR 5.1** æ¨¡å‹æ”¯æŒ
- çª—å£å¤§å° / æ¿€è¿›åº¦è°ƒèŠ‚
- TTA å’Œåå¤„ç†

</td>
</tr>
</table>

### ğŸš€ äº®ç‚¹

<table>
<tr>
<th width="50%">ç‰¹æ€§</th>
<th width="50%">è¯´æ˜</th>
</tr>
<tr><td>ğŸ¯ <b>GUI è¡Œä¸ºä¸€è‡´</b></td><td>å®Œå…¨å¤åˆ¶ UVR GUI çš„è¡Œä¸ºé€»è¾‘</td></tr>
<tr><td>âš¡ <b>GPU åŠ é€Ÿ</b></td><td>æ”¯æŒ NVIDIA CUDA å’Œ AMD DirectML</td></tr>
<tr><td>ğŸ”§ <b>é›¶é…ç½®</b></td><td>è‡ªåŠ¨æ£€æµ‹æ¨¡å‹å‚æ•°</td></tr>
<tr><td>ğŸ“¦ <b>æ‰¹é‡å¤„ç†</b></td><td>é€‚åˆè‡ªåŠ¨åŒ–å’Œæµæ°´çº¿</td></tr>
<tr><td>ğŸšï¸ <b>ä½æ·±æ§åˆ¶</b></td><td>16/24/32-bit PCMï¼Œ32/64-bit æµ®ç‚¹</td></tr>
<tr><td>ğŸ“¥ <b>è‡ªåŠ¨ä¸‹è½½</b></td><td>å®˜æ–¹ UVR æ¨¡å‹æ³¨å†Œè¡¨ + è‡ªåŠ¨ä¸‹è½½</td></tr>
<tr><td>ğŸ›¡ï¸ <b>å¥å£®é”™è¯¯å¤„ç†</b></td><td>GPU å›é€€ã€é‡è¯•ã€æ¨¡ç³ŠåŒ¹é…</td></tr>
<tr><td>ğŸ”— <b>ç»Ÿä¸€ CLI</b></td><td><code>uvr mdx</code> / <code>uvr demucs</code> / <code>uvr vr</code> â€” ä¸€æ¡å‘½ä»¤æå®š</td></tr>
<tr><td>ğŸ“¦ <b>PyPI å‘å¸ƒ</b></td><td><code>pip install uvr-headless-runner</code> â€” å³è£…å³ç”¨</td></tr>
</table>

---

## ğŸ“– è®¾è®¡ç†å¿µ

> <img src="https://img.shields.io/badge/é‡è¦-red?style=flat-square" alt="é‡è¦"/>
> 
> **æœ¬é¡¹ç›®æ˜¯ [Ultimate Vocal Remover](https://github.com/Anjok07/ultimatevocalremovergui) çš„æ— å¤´è‡ªåŠ¨åŒ–å±‚ã€‚**
> 
> å®ƒ**ä¸ä¼š**é‡æ–°å®ç°ä»»ä½•åˆ†ç¦»é€»è¾‘ã€‚  
> å®ƒ**å®Œå…¨å¤åˆ¶** UVR GUI çš„è¡Œä¸º â€”â€” åŒ…æ‹¬æ¨¡å‹åŠ è½½ã€å‚æ•°å›é€€å’Œè‡ªåŠ¨æ£€æµ‹ã€‚
> 
> **âœ… å¦‚æœæ¨¡å‹åœ¨ UVR GUI ä¸­èƒ½ç”¨ï¼Œè¿™é‡Œå°±èƒ½ç”¨ â€”â€” æ— éœ€é¢å¤–é…ç½®ã€‚**

---

## ğŸ¤” ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªå·¥å…·ï¼Ÿ

> å¤§å¤šæ•°å‘½ä»¤è¡Œåˆ†ç¦»å·¥å…·å°†ä½ é™åˆ¶åœ¨é¢„å®šä¹‰çš„æ¨¡å‹åˆ—è¡¨ä¸­ã€‚ä½œä¸ºé«˜çº§ç”¨æˆ·ï¼Œä½ éœ€è¦æ›´å¤šã€‚

<table>
<tr>
<td width="33%" align="center">

### ğŸ¨ å®Œå…¨è‡ªå®šä¹‰æ¨¡å‹

ç›´æ¥ä½¿ç”¨ä½ çš„ `.pth` æˆ– `.ckpt` æ–‡ä»¶ã€‚  
**æ²¡æœ‰ç¡¬ç¼–ç åˆ—è¡¨ï¼Œæ²¡æœ‰é™åˆ¶ã€‚**

</td>
<td width="33%" align="center">

### ğŸ–¥ï¸ æ— å¤´ & è¿œç¨‹å°±ç»ª

ä¸“ä¸º Web æœåŠ¡å’Œè‡ªåŠ¨åŒ–è„šæœ¬  
**æ— ç¼é›†æˆ**è€Œè®¾è®¡ã€‚

</td>
<td width="33%" align="center">

### ğŸ‘¥ ç”¨æˆ·è‡³ä¸Š

ç”±éŸ³é¢‘çˆ±å¥½è€…è®¾è®¡ï¼Œ  
**çµæ´»æ€§ä¼˜å…ˆäºé™åˆ¶ã€‚**

</td>
</tr>
</table>

---

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

| ç»„ä»¶ | è¦æ±‚ |
|------|------|
| **Python** | 3.9.xï¼ˆ3.10+ æœªå®Œå…¨æµ‹è¯•ï¼‰ |
| **GPU** | NVIDIA CUDA æˆ– AMD DirectML *ï¼ˆå¯é€‰ï¼‰* |
| **ç³»ç»Ÿ** | Windows / Linux / macOS |

---

## ğŸ”§ å®‰è£…

<details open>
<summary><b>ğŸš€ æ–¹å¼ä¸€ï¼špip install ä» PyPI å®‰è£…ï¼ˆæ¨èï¼‰</b></summary>

```bash
# ä» PyPI å®‰è£…
pip install uvr-headless-runner

# GPU æ”¯æŒ (NVIDIA)
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124

# ONNX GPUï¼ˆå¯é€‰ï¼‰
pip install onnxruntime-gpu
```

å®‰è£…åå³å¯ä½¿ç”¨ **`uvr` ç»Ÿä¸€å‘½ä»¤** â€” æ— éœ€å…‹éš†ä»“åº“ï¼

```bash
uvr mdx -m "UVR-MDX-NET Inst HQ 3" -i song.wav -o output/
uvr demucs -m htdemucs -i song.wav -o output/
uvr vr -m "UVR-De-Echo-Normal" -i song.wav -o output/
```

</details>

<details>
<summary><b>ğŸ“¦ æ–¹å¼äºŒï¼šPoetryï¼ˆä»æºç å®‰è£…ï¼‰</b></summary>

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/chyinan/uvr-headless-runner.git
cd uvr-headless-runner

# å®‰è£…ä¾èµ–
poetry install

# GPU æ”¯æŒ (NVIDIA)
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124

# ONNX GPUï¼ˆå¯é€‰ï¼‰
pip install onnxruntime-gpu
```

</details>

<details>
<summary><b>ğŸ“¦ æ–¹å¼ä¸‰ï¼špip + venvï¼ˆä»æºç å®‰è£…ï¼‰</b></summary>

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/chyinan/uvr-headless-runner.git
cd uvr-headless-runner

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/macOS
# venv\Scripts\activate   # Windows

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# GPU æ”¯æŒ (NVIDIA)
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124
```

</details>

<details>
<summary><b>ğŸ”´ AMD æ˜¾å¡ï¼ˆDirectMLï¼‰</b></summary>

```bash
# å®‰è£… DirectML æ”¯æŒ
pip install torch-directml

# ä½¿ç”¨ --directml å‚æ•°
python mdx_headless_runner.py -m model.ckpt -i song.wav -o output/ --directml
```

> âš ï¸ DirectML ä¸ºå®éªŒæ€§åŠŸèƒ½ï¼Œæ¨èä½¿ç”¨ NVIDIA CUDA ä»¥è·å¾—æœ€ä½³æ€§èƒ½ã€‚

</details>

### âœ… éªŒè¯å®‰è£…ï¼ˆä»…é™åŸç”Ÿ Python å®‰è£…ï¼‰

```bash
python -c "import torch; print(f'PyTorch: {torch.__version__}'); print(f'CUDA: {torch.cuda.is_available()}')"
```

> ğŸ’¡ å¦‚æœä½¿ç”¨ Dockerï¼Œè¯·è·³è¿‡æ­¤æ­¥éª¤ - å®¹å™¨å·²åŒ…å«æ‰€æœ‰ä¾èµ–ã€‚

<details>
<summary><b>ğŸ³ æ–¹å¼å››ï¼šDocker Hubï¼ˆæ— éœ€æ„å»ºï¼ï¼‰</b></summary>

**æœ€å¿«æ·çš„æ–¹å¼ - ç›´æ¥æ‹‰å–è¿è¡Œï¼**

```bash
# ä» Docker Hub æ‹‰å–é¢„æ„å»ºé•œåƒ
docker pull chyinan/uvr-headless-runner:latest

# ç›´æ¥è¿è¡Œï¼ˆGPU æ¨¡å¼ï¼‰
docker run --rm --gpus all \
  -v ~/.uvr_models:/models \
  -v $(pwd):/data \
  chyinan/uvr-headless-runner:latest \
  uvr-mdx -m "UVR-MDX-NET Inst HQ 3" -i /data/song.wav -o /data/output/

# ç›´æ¥è¿è¡Œï¼ˆCPU æ¨¡å¼ï¼‰
docker run --rm \
  -v ~/.uvr_models:/models \
  -v $(pwd):/data \
  chyinan/uvr-headless-runner:latest \
  uvr-mdx -m "UVR-MDX-NET Inst HQ 3" -i /data/song.wav -o /data/output/ --cpu
```

**æˆ–å®‰è£… CLI åŒ…è£…å™¨è·å¾—åŸç”Ÿä½“éªŒï¼š**

```bash
# ä¸€é”®å®‰è£…ï¼ˆè‡ªåŠ¨æ£€æµ‹ GPUï¼‰
./docker/install.sh      # Linux/macOS
.\docker\install.ps1     # Windows

# ç„¶ååƒåŸç”Ÿå‘½ä»¤ä¸€æ ·ä½¿ç”¨
uvr-mdx -m "UVR-MDX-NET Inst HQ 3" -i song.wav -o output/
uvr-demucs -m htdemucs -i song.wav -o output/
uvr-vr -m "UVR-De-Echo-Normal" -i song.wav -o output/
```

ğŸ“– **[æŸ¥çœ‹å®Œæ•´ Docker æŒ‡å— â†’](DOCKER_README_CN.md)**

</details>

---

## ğŸ¼ å¿«é€Ÿå¼€å§‹

### ç»Ÿä¸€ CLIï¼ˆpip install / Docker å‡å¯ç”¨ï¼‰

é€šè¿‡ `pip install uvr-headless-runner` æˆ– Docker å®‰è£…åï¼Œå³å¯ä½¿ç”¨**ç®€çŸ­å‘½ä»¤**ï¼š

```bash
# MDX-Net / Roformer åˆ†ç¦»
uvr mdx -m "UVR-MDX-NET Inst HQ 3" -i song.wav -o output/ --gpu

# Demucs åˆ†ç¦»
uvr demucs -m htdemucs -i song.wav -o output/ --gpu

# VR Architecture åˆ†ç¦»
uvr vr -m "UVR-De-Echo-Normal" -i song.wav -o output/ --gpu

# åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡å‹
uvr list all

# ä¸‹è½½æ¨¡å‹
uvr download "UVR-MDX-NET Inst HQ 3" --arch mdx

# æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
uvr info
```

> ğŸ’¡ ä¹Ÿå¯ä»¥ä½¿ç”¨ç‹¬ç«‹å‘½ä»¤ï¼š`uvr-mdx`ã€`uvr-demucs`ã€`uvr-vr`

### MDX-Net / Roformer / SCNet

```bash
# åŸºæœ¬åˆ†ç¦»
python mdx_headless_runner.py -m "model.ckpt" -i "song.flac" -o "output/" --gpu

# åªè¾“å‡ºäººå£°ï¼ˆ24-bitï¼‰
python mdx_headless_runner.py -m "model.ckpt" -i "song.flac" -o "output/" --gpu --vocals-only --wav-type PCM_24
```

### Demucs

```bash
# è¾“å‡ºå…¨éƒ¨ 4 è½¨
python demucs_headless_runner.py --model htdemucs --input "song.flac" --output "output/" --gpu

# åªè¾“å‡ºäººå£°
python demucs_headless_runner.py --model htdemucs --input "song.flac" --output "output/" --gpu --stem Vocals --primary-only
```

### VR Architecture

```bash
# åŸºæœ¬åˆ†ç¦»ï¼ˆæ¨¡å‹åœ¨æ•°æ®åº“ä¸­ï¼‰
python vr_headless_runner.py -m "model.pth" -i "song.flac" -o "output/" --gpu

# è‡ªå®šä¹‰æ¨¡å‹ï¼ˆä¸åœ¨æ•°æ®åº“ä¸­ï¼‰
python vr_headless_runner.py -m "model.pth" -i "song.flac" -o "output/" --gpu \
    --param 4band_v3 --primary-stem Vocals
```

---

## ğŸ“¥ æ¨¡å‹ä¸‹è½½ä¸­å¿ƒ

æ‰€æœ‰è¿è¡Œå™¨ç°åœ¨éƒ½æ”¯æŒä»å®˜æ–¹ UVR æº**è‡ªåŠ¨ä¸‹è½½æ¨¡å‹** â€”â€” å°±åƒ GUI ä¸€æ ·ï¼

### åˆ—å‡ºå¯ç”¨æ¨¡å‹

```bash
# åˆ—å‡ºæ‰€æœ‰ MDX-Net æ¨¡å‹
python mdx_headless_runner.py --list

# åªåˆ—å‡ºå·²å®‰è£…çš„æ¨¡å‹
python mdx_headless_runner.py --list-installed

# åˆ—å‡ºæœªä¸‹è½½çš„æ¨¡å‹
python mdx_headless_runner.py --list-uninstalled

# Demucs å’Œ VR ä¹Ÿä¸€æ ·
python demucs_headless_runner.py --list
python vr_headless_runner.py --list
```

### ä¸‹è½½æ¨¡å‹

```bash
# ä¸‹è½½æŒ‡å®šæ¨¡å‹ï¼ˆä¸è¿è¡Œæ¨ç†ï¼‰
python mdx_headless_runner.py --download "UVR-MDX-NET Inst HQ 3"
python demucs_headless_runner.py --download "htdemucs_ft"
python vr_headless_runner.py --download "UVR-De-Echo-Normal by FoxJoy"
```

### æ¨ç†æ—¶è‡ªåŠ¨ä¸‹è½½

```bash
# ç›´æ¥ä½¿ç”¨æ¨¡å‹å - å¦‚æœæœªå®‰è£…ä¼šè‡ªåŠ¨ä¸‹è½½ï¼
python mdx_headless_runner.py -m "UVR-MDX-NET Inst HQ 3" -i "song.flac" -o "output/" --gpu

# Demucs æ¨¡å‹ä¹Ÿæ”¯æŒè‡ªåŠ¨ä¸‹è½½
python demucs_headless_runner.py --model htdemucs_ft --input "song.flac" --output "output/" --gpu
```

### æ¨¡å‹ä¿¡æ¯ & æ¨¡ç³ŠåŒ¹é…

```bash
# è·å–æ¨¡å‹è¯¦ç»†ä¿¡æ¯
python mdx_headless_runner.py --model-info "UVR-MDX-NET Inst HQ 3"

# æ‹¼å†™é”™è¯¯ï¼Ÿç»™ä½ å»ºè®®ï¼
python mdx_headless_runner.py --model-info "UVR-MDX Inst HQ"
# è¾“å‡º: Did you mean: UVR-MDX-NET Inst HQ 1, UVR-MDX-NET Inst HQ 2, ...
```

### åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸŒ **å®˜æ–¹æ³¨å†Œè¡¨** | åŒæ­¥ UVR å®˜æ–¹æ¨¡å‹åˆ—è¡¨ |
| ğŸ”„ **æ–­ç‚¹ç»­ä¼ ** | ä¸­æ–­çš„ä¸‹è½½å¯ä»¥æ¢å¤ |
| â±ï¸ **æŒ‡æ•°é€€é¿é‡è¯•** | ç½‘ç»œé”™è¯¯è‡ªåŠ¨é‡è¯• |
| ğŸ’¾ **ç£ç›˜ç©ºé—´æ£€æŸ¥** | ä¸‹è½½å‰é¢„æ£€å¯ç”¨ç©ºé—´ |
| ğŸ” **æ¨¡ç³ŠåŒ¹é…** | æ‹¼å†™é”™è¯¯æ—¶å»ºè®®ç›¸ä¼¼æ¨¡å‹å |
| âœ… **å®Œæ•´æ€§æ£€æŸ¥** | éªŒè¯ä¸‹è½½æ–‡ä»¶ |

---

## ğŸ›¡ï¸ é”™è¯¯å¤„ç† & GPU å›é€€

æ‰€æœ‰è¿è¡Œå™¨éƒ½åŒ…å«**å¥å£®çš„é”™è¯¯å¤„ç†**ï¼Œæ”¯æŒè‡ªåŠ¨ GPU è½¬ CPU å›é€€ï¼š

```bash
# å¦‚æœ GPU æ˜¾å­˜ä¸è¶³ï¼Œè‡ªåŠ¨å›é€€åˆ° CPU
python mdx_headless_runner.py -m "model.ckpt" -i "song.flac" -o "output/" --gpu

# GPU é”™è¯¯æ—¶çš„è¾“å‡º:
# ============================================================
# ERROR: GPU memory exhausted
# ============================================================
# Suggestion: Try: (1) Use --cpu flag, (2) Reduce --batch-size...
#
# Attempting to fall back to CPU mode...
```

### é”™è¯¯æ¶ˆæ¯

é”™è¯¯ç°åœ¨åŒ…å«æ¸…æ™°çš„è§£é‡Šå’Œå»ºè®®ï¼š

| ä¹‹å‰ | ä¹‹å |
|------|------|
| `FileNotFoundError` | `Audio file not found: song.wav` |
| `CUDA out of memory` | `GPU memory exhausted. Try: --cpu or reduce --batch-size` |
| `Model not found` | `Model 'xyz' not found. Did you mean: UVR-MDX-NET...?` |

---

## ğŸ“Š CLI è¿›åº¦æ˜¾ç¤º

æ‰€æœ‰è¿è¡Œå™¨éƒ½é…å¤‡ **ä¸“ä¸šçš„ CLI è¿›åº¦ç³»ç»Ÿ**ï¼Œæä¾›å®æ—¶åé¦ˆï¼š

```
â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚                          UVR éŸ³é¢‘åˆ†ç¦»                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ¨¡å‹           â”‚ UVR-MDX-NET Inst HQ 3                                   â”‚
â”‚  è¾“å…¥           â”‚ song.flac                                               â”‚
â”‚  è¾“å‡º           â”‚ ./output/                                               â”‚
â”‚  è®¾å¤‡           â”‚ CUDA:0                                                  â”‚
â”‚  æ¶æ„           â”‚ MDX-Net                                                 â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

â ¹ æ­£åœ¨ä¸‹è½½æ¨¡å‹: UVR-MDX-NET Inst HQ 3
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100% â€¢ 245.3 MB â€¢ 12.5 MB/s â€¢ 0:00:00

âœ“ æ¨¡å‹ä¸‹è½½å®Œæˆ

â ¹ æ­£åœ¨æ¨ç†
  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  42% â€¢ 0:01:23 â€¢ 0:01:52

âœ“ æ¨ç†å®Œæˆ

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚              âœ“ å¤„ç†å®Œæˆï¼Œè€—æ—¶ 3:15                                        â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

è¾“å‡ºæ–‡ä»¶:
  â€¢ output/song_(Vocals).wav
  â€¢ output/song_(Instrumental).wav
```

### åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ“¥ **ä¸‹è½½è¿›åº¦** | å®æ—¶æ˜¾ç¤ºä¸‹è½½é€Ÿåº¦ã€å‰©ä½™æ—¶é—´å’Œä¼ è¾“ç»Ÿè®¡ |
| ğŸ¯ **æ¨ç†è¿›åº¦** | åŸºäºåˆ†å—çš„éŸ³é¢‘å¤„ç†è¿›åº¦è·Ÿè¸ª |
| â±ï¸ **æ—¶é—´ä¼°ç®—** | æ˜¾ç¤ºå·²ç”¨æ—¶é—´å’Œå‰©ä½™æ—¶é—´ (ETA) |
| ğŸ¨ **ç²¾ç¾è¾“å‡º** | ä½¿ç”¨ `rich` åº“çš„ç²¾ç¾ç»ˆç«¯ UI |
| ğŸ³ **Docker å…¼å®¹** | åœ¨å®¹å™¨å†…æ— ç¼è¿è¡Œ |
| ğŸ“‰ **ä¼˜é›…é™çº§** | å¦‚æœ `rich` ä¸å¯ç”¨åˆ™å›é€€åˆ°åŸºç¡€è¾“å‡º |

### è¿›åº¦åº“æ”¯æŒ

ç³»ç»Ÿè‡ªåŠ¨é€‰æ‹©æœ€ä½³å¯ç”¨åº“ï¼š

1. **`rich`** (é¦–é€‰) - å¸¦é¢œè‰²çš„å…¨åŠŸèƒ½è¿›åº¦æ¡
2. **`tqdm`** (å¤‡é€‰) - æ ‡å‡†è¿›åº¦æ¡
3. **åŸºç¡€** (æ— ä¾èµ–) - ç®€å•æ–‡æœ¬è¿›åº¦

å®‰è£… `rich` ä»¥è·å¾—æœ€ä½³ä½“éªŒï¼š
```bash
pip install rich
```

### é™é»˜æ¨¡å¼

ä¸ºè„šæœ¬ç¦ç”¨è¿›åº¦è¾“å‡ºï¼š
```bash
python mdx_headless_runner.py -m model.ckpt -i song.wav -o output/ --quiet
```

---

## ğŸ›ï¸ MDX-Net è¿è¡Œå™¨

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç®€å†™ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--model` | `-m` | **å¿…éœ€** | æ¨¡å‹æ–‡ä»¶è·¯å¾„ (.ckpt/.onnx) |
| `--input` | `-i` | **å¿…éœ€** | è¾“å…¥éŸ³é¢‘æ–‡ä»¶ |
| `--output` | `-o` | **å¿…éœ€** | è¾“å‡ºç›®å½• |
| `--gpu` | | è‡ªåŠ¨ | ä½¿ç”¨ NVIDIA CUDA |
| `--directml` | | | ä½¿ç”¨ AMD DirectML |
| `--overlap` | | `0.25` | MDX é‡å ç‡ (0.25-0.99) |
| `--overlap-mdxc` | | `2` | MDX-C/Roformer é‡å  (2-50) |
| `--wav-type` | | `PCM_24` | è¾“å‡ºæ ¼å¼ï¼šPCM_16/24/32, FLOAT, DOUBLE |
| `--vocals-only` | | | åªè¾“å‡ºäººå£° |
| `--instrumental-only` | | | åªè¾“å‡ºä¼´å¥ |

<details>
<summary><b>ğŸ“‹ å…¨éƒ¨å‚æ•°</b></summary>

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--name` `-n` | è¾“å‡ºæ–‡ä»¶å |
| `--json` | æ¨¡å‹ JSON é…ç½® |
| `--cpu` | å¼ºåˆ¶ CPU |
| `--device` `-d` | GPU è®¾å¤‡ ID |
| `--segment-size` | æ®µå¤§å°ï¼ˆé»˜è®¤ï¼š256ï¼‰ |
| `--batch-size` | æ‰¹æ¬¡å¤§å°ï¼ˆé»˜è®¤ï¼š1ï¼‰ |
| `--primary-only` | åªä¿å­˜ primary stem |
| `--secondary-only` | åªä¿å­˜ secondary stem |
| `--stem` | MDX-C stem é€‰æ‹© |
| `--quiet` `-q` | é™é»˜æ¨¡å¼ |

</details>

### ä½¿ç”¨ç¤ºä¾‹

```bash
# Roformer æ¨¡å‹ + è‡ªå®šä¹‰é‡å 
python mdx_headless_runner.py \
    -m "MDX23C-8KFFT-InstVoc_HQ.ckpt" \
    -i "song.flac" -o "output/" \
    --gpu --overlap-mdxc 8

# 32-bit æµ®ç‚¹è¾“å‡º
python mdx_headless_runner.py \
    -m "model.ckpt" -i "song.flac" -o "output/" \
    --gpu --wav-type FLOAT
```

---

## ğŸ¥ Demucs è¿è¡Œå™¨

### æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | ç‰ˆæœ¬ | è½¨é“ | è´¨é‡ |
|------|------|------|------|
| `htdemucs` | v4 | 4 | â­â­â­ |
| `htdemucs_ft` | v4 | 4 | â­â­â­â­ ç²¾è°ƒç‰ˆ |
| `htdemucs_6s` | v4 | 6 | â­â­â­â­ +å‰ä»–/é’¢ç´ |
| `hdemucs_mmi` | v4 | 4 | â­â­â­ |
| `mdx_extra_q` | v3 | 4 | â­â­â­ |

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç®€å†™ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--model` | `-m` | **å¿…éœ€** | æ¨¡å‹åç§°æˆ–è·¯å¾„ |
| `--input` | `-i` | **å¿…éœ€** | è¾“å…¥éŸ³é¢‘æ–‡ä»¶ |
| `--output` | `-o` | **å¿…éœ€** | è¾“å‡ºç›®å½• |
| `--gpu` | | è‡ªåŠ¨ | ä½¿ç”¨ NVIDIA CUDA |
| `--segment` | | Default | åˆ†æ®µå¤§å° (1-100+) |
| `--shifts` | | `2` | æ—¶é—´åç§»æ¬¡æ•° |
| `--stem` | | | Vocals/Drums/Bass/Other/Guitar/Piano |
| `--wav-type` | | `PCM_24` | è¾“å‡ºä½æ·± |
| `--primary-only` | | | åªè¾“å‡º primary stem |

### Stem é€‰æ‹©

| GUI æ“ä½œ | CLI å‘½ä»¤ |
|---------|---------|
| å…¨éƒ¨è½¨é“ | *ï¼ˆä¸æŒ‡å®š --stemï¼‰* |
| åªè¦äººå£° | `--stem Vocals --primary-only` |
| åªè¦ä¼´å¥ | `--stem Vocals --secondary-only` |

### ä½¿ç”¨ç¤ºä¾‹

```bash
# 6 è½¨åˆ†ç¦»
python demucs_headless_runner.py \
    --model htdemucs_6s \
    --input "song.flac" --output "output/" \
    --gpu

# é«˜è´¨é‡ + è‡ªå®šä¹‰ segment
python demucs_headless_runner.py \
    --model htdemucs_ft \
    --input "song.flac" --output "output/" \
    --gpu --segment 85
```

---

## ğŸ¤ VR Architecture è¿è¡Œå™¨

### å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | ç®€å†™ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `--model` | `-m` | **å¿…éœ€** | æ¨¡å‹æ–‡ä»¶è·¯å¾„ (.pth) |
| `--input` | `-i` | **å¿…éœ€** | è¾“å…¥éŸ³é¢‘æ–‡ä»¶ |
| `--output` | `-o` | **å¿…éœ€** | è¾“å‡ºç›®å½• |
| `--gpu` | | è‡ªåŠ¨ | ä½¿ç”¨ NVIDIA CUDA |
| `--directml` | | | ä½¿ç”¨ AMD DirectML |
| `--window-size` | | `512` | çª—å£å¤§å° (320/512/1024) |
| `--aggression` | | `5` | æ¿€è¿›åº¦è®¾ç½® (0-50+) |
| `--wav-type` | | `PCM_16` | è¾“å‡ºæ ¼å¼ï¼šPCM_16/24/32, FLOAT, DOUBLE |
| `--primary-only` | | | åªè¾“å‡º primary stem |
| `--secondary-only` | | | åªè¾“å‡º secondary stem |

<details>
<summary><b>ğŸ“‹ å…¨éƒ¨å‚æ•°</b></summary>

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--name` `-n` | è¾“å‡ºæ–‡ä»¶å |
| `--param` | æ¨¡å‹å‚æ•°åï¼ˆå¦‚ 4band_v3ï¼‰ |
| `--primary-stem` | Primary stem åç§°ï¼ˆVocals/Instrumentalï¼‰ |
| `--nout` | VR 5.1 nout å‚æ•° |
| `--nout-lstm` | VR 5.1 nout_lstm å‚æ•° |
| `--cpu` | å¼ºåˆ¶ CPU |
| `--device` `-d` | GPU è®¾å¤‡ ID |
| `--batch-size` | æ‰¹æ¬¡å¤§å°ï¼ˆé»˜è®¤ï¼š1ï¼‰ |
| `--tta` | å¯ç”¨ Test-Time Augmentation |
| `--post-process` | å¯ç”¨åå¤„ç† |
| `--post-process-threshold` | åå¤„ç†é˜ˆå€¼ï¼ˆé»˜è®¤ï¼š0.2ï¼‰ |
| `--high-end-process` | å¯ç”¨é«˜ç«¯é•œåƒå¤„ç† |
| `--list-params` | åˆ—å‡ºå¯ç”¨çš„æ¨¡å‹å‚æ•° |

</details>

### æ¨¡å‹å‚æ•°

å½“æ¨¡å‹å“ˆå¸Œä¸åœ¨æ•°æ®åº“ä¸­æ—¶ï¼Œéœ€è¦æ‰‹åŠ¨æä¾›å‚æ•°ï¼š

```bash
# åˆ—å‡ºå¯ç”¨å‚æ•°
python vr_headless_runner.py --list-params

# ä½¿ç”¨è‡ªå®šä¹‰å‚æ•°
python vr_headless_runner.py -m "model.pth" -i "song.flac" -o "output/" \
    --param 4band_v3 --primary-stem Vocals

# VR 5.1 æ¨¡å‹æŒ‡å®š nout/nout_lstm
python vr_headless_runner.py -m "model.pth" -i "song.flac" -o "output/" \
    --param 4band_v3 --primary-stem Vocals --nout 48 --nout-lstm 128
```

### ä½¿ç”¨ç¤ºä¾‹

```bash
# é«˜è´¨é‡ + TTA
python vr_headless_runner.py \
    -m "UVR-MDX-NET-Voc_FT.pth" \
    -i "song.flac" -o "output/" \
    --gpu --tta --window-size 1024

# é«˜æ¿€è¿›åº¦åˆ†ç¦»
python vr_headless_runner.py \
    -m "model.pth" -i "song.flac" -o "output/" \
    --gpu --aggression 15 --post-process

# 24-bit è¾“å‡º
python vr_headless_runner.py \
    -m "model.pth" -i "song.flac" -o "output/" \
    --gpu --wav-type PCM_24
```

---

## ğŸ“ è¾“å‡ºç»“æ„

```
output/
â”œâ”€â”€ song_(Vocals).wav        # äººå£°
â”œâ”€â”€ song_(Instrumental).wav  # ä¼´å¥ (MDX)
â”œâ”€â”€ song_(Drums).wav         # é¼“ (Demucs)
â”œâ”€â”€ song_(Bass).wav          # è´æ–¯ (Demucs)
â”œâ”€â”€ song_(Other).wav         # å…¶ä»– (Demucs)
â”œâ”€â”€ song_(Guitar).wav        # å‰ä»– (6è½¨)
â””â”€â”€ song_(Piano).wav         # é’¢ç´ (6è½¨)
```

---

## ğŸ Python API

```python
from mdx_headless_runner import run_mdx_headless
from demucs_headless_runner import run_demucs_headless
from vr_headless_runner import run_vr_headless

# MDX åˆ†ç¦»
run_mdx_headless(
    model_path='model.ckpt',
    audio_file='song.wav',
    export_path='output',
    use_gpu=True,
    verbose=True  # æ‰“å°è¿›åº¦
)
# è¾“å‡º: output/song_(Vocals).wav, output/song_(Instrumental).wav

# Demucs åˆ†ç¦»ï¼ˆåªè¦äººå£°ï¼‰
run_demucs_headless(
    model_path='htdemucs',
    audio_file='song.wav',
    export_path='output',
    use_gpu=True,
    demucs_stems='Vocals',  # æˆ– 'All Stems' è¾“å‡ºå…¨éƒ¨
    primary_only=True,
    verbose=True
)
# è¾“å‡º: output/song_(Vocals).wav

# VR Architecture åˆ†ç¦»
run_vr_headless(
    model_path='model.pth',
    audio_file='song.wav',
    export_path='output',
    use_gpu=True,
    window_size=512,
    aggression_setting=5,
    is_tta=False,
    # æœªçŸ¥æ¨¡å‹éœ€æ‰‹åŠ¨æŒ‡å®šå‚æ•°:
    # user_vr_model_param='4band_v3',
    # user_primary_stem='Vocals'
)
# è¾“å‡º: output/song_(Vocals).wav, output/song_(Instrumental).wav
```

> ğŸ’¡ **è¯´æ˜**: å‡½æ•°ä¼šå¤„ç†éŸ³é¢‘å¹¶ä¿å­˜åˆ° `export_path`ã€‚ç»“æœè¯·æŸ¥çœ‹è¾“å‡ºç›®å½•ã€‚

---

## ğŸ” æ•…éšœæ’é™¤

<details>
<summary><b>âŒ GPU æœªæ£€æµ‹åˆ°</b></summary>

```bash
# æ£€æŸ¥ CUDA
python -c "import torch; print(torch.cuda.is_available())"

# é‡æ–°å®‰è£…å¸¦ CUDA çš„ PyTorch
pip uninstall torch torchvision torchaudio
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu124
```

</details>

<details>
<summary><b>âŒ æ‰¾ä¸åˆ°æ¨¡å‹</b></summary>

**æ–¹å¼ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨ä¸‹è½½ï¼ˆæ¨èï¼‰**
```bash
# åˆ—å‡ºå¯ç”¨æ¨¡å‹
python mdx_headless_runner.py --list

# ä¸‹è½½æ¨¡å‹
python mdx_headless_runner.py --download "UVR-MDX-NET Inst HQ 3"

# æˆ–è€…ç›´æ¥ä½¿ç”¨ - è‡ªåŠ¨ä¸‹è½½ï¼
python mdx_headless_runner.py -m "UVR-MDX-NET Inst HQ 3" -i song.wav -o output/
```

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨ä¸‹è½½**

é»˜è®¤ä½ç½®ï¼š
- **MDX**: `./models/MDX_Net_Models/`
- **Demucs**: `./models/Demucs_Models/v3_v4_repo/`
- **VR**: `./models/VR_Models/`

</details>

<details>
<summary><b>âŒ ç½‘ç»œ/ä¸‹è½½é”™è¯¯</b></summary>

```bash
# å¼ºåˆ¶åˆ·æ–°æ¨¡å‹æ³¨å†Œè¡¨
python model_downloader.py --sync

# æ£€æŸ¥ç½‘ç»œè¿æ¥
python -c "import urllib.request; urllib.request.urlopen('https://github.com')"
```

ä¸‹è½½å™¨åŒ…å«ï¼š
- è‡ªåŠ¨é‡è¯•ï¼ˆ3 æ¬¡ï¼ŒæŒ‡æ•°é€€é¿ï¼‰
- æ–­ç‚¹ç»­ä¼ 
- æ³¨å†Œè¡¨ç¼“å­˜å›é€€

</details>

<details>
<summary><b>âŒ VR æ¨¡å‹å“ˆå¸Œæœªæ‰¾åˆ°</b></summary>

å¦‚æœä½ çš„ VR æ¨¡å‹ä¸åœ¨æ•°æ®åº“ä¸­ï¼Œéœ€è¦æ‰‹åŠ¨æŒ‡å®šå‚æ•°ï¼š

```bash
# åˆ—å‡ºå¯ç”¨å‚æ•°
python vr_headless_runner.py --list-params

# æŒ‡å®š param å’Œ primary stem
python vr_headless_runner.py -m "model.pth" -i "song.wav" -o "output/" \
    --param 4band_v3 --primary-stem Vocals
```

å¸¸ç”¨å‚æ•°: `4band_v3`, `4band_v2`, `1band_sr44100_hl512`, `3band_44100`

</details>

<details>
<summary><b>âŒ è¾“å‡ºè´¨é‡ä¸ä½³</b></summary>

- å°è¯•å¢åŠ  `--overlap` æˆ– `--overlap-mdxc`
- Demucs å¯ä»¥å¢åŠ  `--segment`ï¼ˆå¦‚ 85ï¼‰
- ä½¿ç”¨ `--json` æŒ‡å®šæ­£ç¡®çš„æ¨¡å‹é…ç½®

</details>

---

## ğŸ™ è‡´è°¢

<table>
<tr>
<td align="center">
<a href="https://github.com/Anjok07/ultimatevocalremovergui">
<img src="https://img.shields.io/badge/UVR-Ultimate%20Vocal%20Remover-purple?style=for-the-badge" alt="UVR"/>
</a>
<br/>
<sub><b>Anjok07</b> & <b>aufr33</b></sub>
</td>
<td align="center">
<a href="https://github.com/facebookresearch/demucs">
<img src="https://img.shields.io/badge/Meta-Demucs-blue?style=for-the-badge" alt="Demucs"/>
</a>
<br/>
<sub><b>Facebook Research</b></sub>
</td>
<td align="center">
<a href="https://github.com/kuielab">
<img src="https://img.shields.io/badge/Kuielab-MDX--Net-green?style=for-the-badge" alt="MDX-Net"/>
</a>
<br/>
<sub><b>Woosung Choi</b></sub>
</td>
<td align="center">
<a href="https://github.com/tsurumeso/vocal-remover">
<img src="https://img.shields.io/badge/Tsurumeso-VR%20Architecture-orange?style=for-the-badge" alt="VR Architecture"/>
</a>
<br/>
<sub><b>tsurumeso</b></sub>
</td>
</tr>
</table>

ç‰¹åˆ«æ„Ÿè°¢ **[ZFTurbo](https://github.com/ZFTurbo)** æä¾›çš„ MDX23C å’Œ SCNet å®ç°ã€‚

---

## ğŸ“„ è®¸å¯è¯

```
MIT License

Copyright (c) 2022 Anjok07 (Ultimate Vocal Remover)
Copyright (c) 2026 UVR Headless Runner Contributors
```

<p align="center">
  <a href="LICENSE">æŸ¥çœ‹å®Œæ•´è®¸å¯è¯</a>
</p>

---

## è´¡çŒ®ä¸æ”¯æŒ

æ¬¢è¿æäº¤ **Pull Request** å’Œ **Issue**ï¼æ— è®ºæ˜¯ bug åé¦ˆã€åŠŸèƒ½å»ºè®®è¿˜æ˜¯ä»£ç è´¡çŒ®ï¼Œæˆ‘ä»¬éƒ½éå¸¸æ„Ÿè°¢ã€‚

å¦‚æœä½ è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª **Star** â­ï¼Œè¿™æ˜¯å¯¹æˆ‘ä»¬æœ€å¤§çš„æ”¯æŒï¼

---

<p align="center">
  <sub>ä¸ºéŸ³é¢‘åˆ†ç¦»ç¤¾åŒºç”¨ â¤ï¸ åˆ¶ä½œ</sub>
</p>
